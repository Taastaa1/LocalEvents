-- MySQL Script generated by MySQL Workbench
-- 02/19/19 14:19:27
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema LocalEventDB
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema LocalEventDB
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `LocalEventDB` DEFAULT CHARACTER SET utf8 ;
USE `LocalEventDB` ;

-- -----------------------------------------------------
-- Table `LocalEventDB`.`T_BENUTZERLISTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `LocalEventDB`.`T_BENUTZERLISTE` ;

CREATE TABLE IF NOT EXISTS `LocalEventDB`.`T_BENUTZERLISTE` (
  `BLI_ID` INT NOT NULL AUTO_INCREMENT,
  `BLI_NAME` VARCHAR(45) NOT NULL,
  `BLI_VORNAME` VARCHAR(45) NOT NULL,
  `BLI_GEBURTSTAG` DATE NOT NULL,
  `BLI_EMAIL` VARCHAR(150) NOT NULL,
  `BLI_VERIFIED` INT NOT NULL,
  `BLI_ROLLE` VARCHAR(1) NOT NULL,
  `BLI_GESCHLECHT` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`BLI_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `LocalEventDB`.`T_EVENT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `LocalEventDB`.`T_EVENT` ;

CREATE TABLE IF NOT EXISTS `LocalEventDB`.`T_EVENT` (
  `EVT_ID` INT NOT NULL AUTO_INCREMENT,
  `EVT_BLI_ID` INT NOT NULL,
  `EVT_NAME` VARCHAR(45) NOT NULL,
  `EVT_BESCHREIBUNG` VARCHAR(500) NOT NULL,
  `EVT_PREIS` INT NOT NULL,
  `EVT_VON_DATUM` DATE NOT NULL,
  `EVT_BIS_DATUM` DATE NOT NULL,
  `EVT_MAX_TEILNEHMER` INT NOT NULL,
  `EVT_MIN_ALTER` INT NOT NULL,
  `EVT_X_KOORDINATE` DOUBLE NOT NULL,
  `EVT_Y_KOORDINATE` DOUBLE NOT NULL,
  PRIMARY KEY (`EVT_ID`),
  CONSTRAINT `fk_T_EVENT_T_BENUTZERLISTE1`
    FOREIGN KEY (`EVT_BLI_ID`)
    REFERENCES `LocalEventDB`.`T_BENUTZERLISTE` (`BLI_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `LocalEventDB`.`T_TEILNAHME`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `LocalEventDB`.`T_TEILNAHME` ;

CREATE TABLE IF NOT EXISTS `LocalEventDB`.`T_TEILNAHME` (
  `TEI_ID` INT NOT NULL AUTO_INCREMENT,
  `TEI_BLI_ID` INT NOT NULL,
  `TEI_EVT_ID` INT NOT NULL,
  `TEI_ZEITPUNKT` DATE NOT NULL,
  `TEI_ANZ_BEGLEITUNG` INT NULL,
  PRIMARY KEY (`TEI_ID`),
  CONSTRAINT `fk_T_TEILNAHME_T_BENUTZERLISTE`
    FOREIGN KEY (`TEI_BLI_ID`)
    REFERENCES `LocalEventDB`.`T_BENUTZERLISTE` (`BLI_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_TEILNAHME_T_EVENT1`
    FOREIGN KEY (`TEI_EVT_ID`)
    REFERENCES `LocalEventDB`.`T_EVENT` (`EVT_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `LocalEventDB`.`T_CHAT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `LocalEventDB`.`T_CHAT` ;

CREATE TABLE IF NOT EXISTS `LocalEventDB`.`T_CHAT` (
  `CHA_ID` INT NOT NULL AUTO_INCREMENT,
  `CHA_BLI_ID` INT NOT NULL,
  `CHA_EVT_ID` INT NOT NULL,
  `CHA_MESSAGE` VARCHAR(20000) NOT NULL,
  `CHA_DATUM` DATE NOT NULL,
  PRIMARY KEY (`CHA_ID`),
  CONSTRAINT `fk_T_CHAT_T_BENUTZERLISTE1`
    FOREIGN KEY (`CHA_BLI_ID`)
    REFERENCES `LocalEventDB`.`T_BENUTZERLISTE` (`BLI_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_CHAT_T_EVENT1`
    FOREIGN KEY (`CHA_EVT_ID`)
    REFERENCES `LocalEventDB`.`T_EVENT` (`EVT_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
